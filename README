AIM is an input method framework, which provides

  * Input Method Server
    * aim-daemon including XIM

  * Language Engines
    * Korean: aim-jeongeum (based on libhangul)
    * English: aim-english

  * Client Modules
    * GTK+2, GTK+3, Qt4, Qt5

  * Indicators
    * GNOME shell: aim-agent extension
    * KDE, Unity, GNOME panel: aim-indicator (based on libappindicator3)

Project Homepage: https://github.com/cogniti/aim


Install
-------

  * Compile

    ./autogen.sh
    make
    sudo make install
    sudo ldconfig
    sudo make update-gtk-im-cache
    sudo make update-gtk-icon-cache

  * To use symbols in Jeongeum Engine

    wget https://raw.githubusercontent.com/choehwanjin/libhangul/master/data/hanja/mssymbol.txt
    sudo mv mssymbol.txt /usr/share/libhangul/hanja/
    ls /usr/share/libhangul/hanja/mssymbol.txt


Configure
---------

  * For gnome-shell, enable aim-agent@gnome-shell-extensions.cogno.org

    gnome-shell-extension-tool -e aim-agent@gnome-shell-extensions.cogno.org

  * Configure im-config

    Run im-config, then select AIM, logout and login.

  * Configure Hangul/Hanja Key if you use a keyborad
    without hardware Hangul/Hanja key

    Use xkb-data >= 2.14, then
    Select "Right Alt as Hangul, right Ctrl as Hanja" or
           "Right Ctrl as Hangul, right Alt as Hanja" from gnome-tweak-tool.


Troubleshoot
------------

* Failed to load shared library
  Check /etc/ld.so.conf and /etc/ld.so.conf.d/ for /usr/local/lib path


Architecture
------------

      +- im modules --+    +---- each process -----+  +- a process --+
      | gtk im module |    | gnome-shell-extension |  |   X server   |
      | qt  im module |    | aim-indicator         |  +--------------+
      +---------------+    +-----------------------+         ^ |
              | calls                  | calls               | |
     +----------------+      +-------------------+           | |
     | aim IM library |      | aim agent library |           | | communicates
     +----------------+      +-------------------+           | |
             ^ |                      ^ |                    | |
             | |   communicates       | |                    | |
             | |   via Unix Socket    | |                    | |
             | v                      | v                    | v
          +---------------------- a process ----------------------+
          |                aim-daemon (including XIM)             |
          +-------------------------------------------------------+
                          | calls                  | create instance
                          | singleton instance     | (not module yet)
                +---------------+            +------------------+
                | engine module |   calls    | candidate module |
                |   interface   | ---------> |    interface     |
                +---------------+            +------------------+
                  |                            |
                  +- aim-english (embedded)    +- aim-candidate (gtk3)
                  +- aim-jeongeum


Debugging
---------
    aim-daemon --debug
    tail -f /var/log/daemon.log

    export GTK_IM_MODULE="aim"
    export QT4_IM_MODULE="aim"
    export QT_IM_MODULE="aim"
    export XMODIFIERS="@im=aim"
    export G_MESSAGES_DEBUG=aim
    gedit # or kate for Qt


References
----------
  http://www.x.org/releases/X11R7.6/doc/libX11/specs/XIM/xim.html
  http://www.w3.org/TR/ime-api/
  https://developer.chrome.com/extensions/input_ime
  https://docs.enlightenment.org/stable/efl/group__Ecore__IMF__Lib__Group.html
  http://doc.qt.io/qt-4.8/qinputcontext.html
  http://doc.qt.io/qt-5/qinputmethod.html
  https://git.gnome.org/browse/gtk+

  https://github.com/choehwanjin/nabi
  https://github.com/choehwanjin/imhangul
  https://github.com/choehwanjin/ibus-hangul
  https://github.com/ibus/ibus
  https://github.com/fcitx/fcitx
  https://github.com/fcitx/fcitx-qt5
  https://github.com/uim/uim
